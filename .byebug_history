exit
params
parmas
c
request.referrer
request
params
c
n
record.category == "staff" && user.nil?
n
c
record.category
record
c
authorize @user, :staff_invite_sign_up?
authorize @user, :staff_invite_sign_up
n
invite_code && @invite && @invite.email == @user.email
exit
@user
@user.email
@invite.email
@invite
invite_code
invite_code && @invite && @invite.email == @user.email
c
exit
request.original_url
request.referrer
request
c
n
c
User.last.delete
User.all
@user.errors.full_messages
@user.errors.full_message
@user.save.errors
@user.save.errors.full_messages
@user.save.errors.full_message
@user.save
@user
n
c
n
c
exit
invite_form
form
c
params
c
@invite
n
invite_code
n
c
flash
c
n
c
@user.errors
@user.save.error
@user.save.errors
@user.save
@user
n
invite_code && @invite && @invite.email == @user.email
n
flash
c
flash
c
flash
c
flash
c
flash
c
c 
c
flash
c
flash
n
flash
c
flash
c
flash
c
flash
c
flash
c
flash
flash[:notice]=1234
flash
exit
flash
c
flash
n
flash
n
#<ActionDispatch::Flash::FlashHash:0x00557e2597f858 @discard=#<Set: {}>, @flashes={}, @now=nil>
#<ActionDispatch::Flash::FlashHash:0x007f1d743b5018 @discard=#<Set: {}>, @flashes={}, @now=nil>
flash
exit
flash
#<ActionDispatch::Flash::FlashHash:0x007f1d743b5018 @discard=#<Set: {}>, @flashes={}, @now=nil>
FlashClass
Flash
flash
c
flash
c
flash
c
flash
c
n
flash
n
c
n
c
n
c
exit
c
n
c
n
c
configc
c
exit
@invite.first.email
@invite.email
@invite
n
c
n
Invite.find_redeemable(invite_code)
@invite
n
c
n
c
@invite
n
c
n
params[:invite_code]
params
n
params[:invite_code]
!User.find_by(category:'admin').nil? && !signed_in? && Invite.find_by(invite_code:params[:invite_code]).nil?
c
exit
request.referrer.split("/").last
request.referrer
request.origin
request.headers['origin']
request.original_fullpath
request.original_url
request.original
request.previous_url
request
params
c
Invite.all
Invite.find_by(invite_code:params[:invite_code])
Invite.find_by(invite_code:params[:invite_code]).nil?
!signed_in?
!User.find_by(category:'admin').nil?
!User.find_by(category:'admin').nil? && !signed_in? && Invite.find_by(invite_code:params[:invite_code]).nil?
params[:invite_code]
paramsparams[:invite_code]
params
redirect_to sign_in_path if !User.find_by(category:'admin').nil? && !signed_in? && Invite.find_by(invite_code:params[:invite_code]).nil?
c
params
c
request
c
request.original_fullpath
request.url
request.request_url
request.request_uri
request.original_url
request.url
request
invite_code
params
!User.find_by(category:'admin').nil? && !signed_in? && Invite.find_by(invite_code:params[:invite_code]).nil?
c
params
params[:invite_code]
Invite.all
!User.find_by(category:'admin').nil? && !signed_in? && Invite.find_by(invite_code:params[:invite_code]).nil?
c
params
c
mail to:invitation.email, subject:"sada"
exit
deliveries
invitation.deliveries
c
mail to:invitation.email, subject:"sada"
c
exit
mail to:invitation.email, subject: "sada"
exit
mail to: invitation.email, subject: "sada"
exit
mail to: invitation.email, subject: "asdas"
invitation.email
exit
invitation.email
c
mail.deliver_now
c
mail.deliver
c
flash[:notice]
flash
c
mail
c
!User.find_by(category:'admin').nil? && !signed_in? && !Invite.find_by(invite_code:params[:invite_code]).nil?
c
Invite.delete_all
c
Invite.find_by(invite_code:params[:invite_code])
Invite.create(invite_code:"123")
Invite.find_by(invite_code:params[:invite_code])
Invite.find(params[:invite_code])
Invite
c
!params[:invite_code].nil?
!User.find_by(category:'admin').nil? && !signed_in?
!User.find_by(category:'admin').nil? && !signed_in? || !params[:invite_code].nil?
c
params[:invite_code].nil?
params
c
params[:invite_code].nil?
params[:invite_code]
params
signed_in?
!signed_in?
c
n
